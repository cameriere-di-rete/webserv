<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Error - Service Unavailable</title>
	<style>
		/* 1. Basic Reset & Fonts */
		body,
		html {
			margin: 0;
			padding: 0;
			height: 100%;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			overflow: hidden;
		}

		/* 2. Main Container */
		.container {
			display: grid;
			place-items: center;
			height: 100vh;
			width: 100vw;
			position: relative;
			grid-template-areas: "content";

			/* --- STATO DI BASE (BIANCO) --- */
			background-color: #dedede;

			/* Transizione fluida per il cambio sfondo */
			transition: background 0.5s ease-in-out;

			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
		}

		/* --- CLASSE SPECIALE ATTIVATA QUANDO SEI VICINO AL PICCIONE --- */
		.container.bread-mode {
			/* Immagine di sfondo */
			background-image: url('image/bread.jpg');

			/* Effetto sbiadito (Sovrapposizione bianco semi-trasparente) */
			background-color: rgba(255, 255, 255, 0.85);
			background-blend-mode: overlay;
		}

		/* 3. The Big Background Number */
		.error-number {
			grid-area: content;
			font-size: 85vh;
			font-weight: 900;
			color: #222222;
			z-index: 1;
			user-select: none;
			line-height: 1;
			display: flex;
			align-items: center;
			justify-content: center;
			mix-blend-mode: multiply;
		}

		/* 4. The GIANT Bird Image */
		.bird-image {
			position: absolute;
			bottom: -10%;
			right: -10%;
			width: 40vw;
			max-width: 1000px;
			height: auto;
			z-index: 9999;
			;
			pointer-events: none;
			transition: bottom 0.3s ease-out, transform 0.8s cubic-bezier(0.22, 1, 0.36, 1);
			transform: scale(1);
		}

		.bird-image.is-jumping {
			animation: happyHop 0.5s infinite alternate ease-in-out;
		}

		.bird-image.is-scaling {
			transform: scale(1.7);
		}

		@keyframes happyHop {
			0% {
				bottom: -10%;
			}

			100% {
				bottom: -2%;
			}
		}

		/* 5. The Message Text */
		.text-content {
			grid-area: content;
			text-align: center;
			z-index: 10;
			background: rgba(255, 255, 255, 0.7);
			padding: 40px;
			border-radius: 20px;
			backdrop-filter: blur(5px);
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			max-width: 500px;
			position: absolute;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
		}

		h2 {
			color: #333;
			margin-top: 0;
			margin-bottom: 10px;
			font-size: 2.5rem;
		}

		p {
			color: #666;
			margin-bottom: 30px;
			font-size: 1.1rem;
			line-height: 1.5;
		}

		.home-btn {
			display: inline-block;
			padding: 12px 30px;
			background-color: #333;
			color: white;
			text-decoration: none;
			border-radius: 5px;
			opacity: 0.9;
			font-weight: bold;
			transition: background 0.3s;
		}

		.home-btn:hover {
			background-color: #555;
		}

		/* --- STILE PER IL TRAIL DEL MOUSE (Briciole) --- */
		.crumb {
			position: absolute;
			pointer-events: none;
			z-index: 10001;
			animation: fallAndFade 1s linear forwards;
		}

		@keyframes fallAndFade {
			0% {
				opacity: 1;
				transform: translateY(0) scale(1) rotate(0deg);
			}

			100% {
				opacity: 0;
				transform: translateY(150px) scale(0.5) rotate(180deg);
			}
		}

		/* Mobile Adjustment */
		@media (max-width: 768px) {
			.bird-image {
				width: 120%;
				right: -20%;
				bottom: 0;
			}

			@keyframes happyHop {
				0% {
					bottom: 0;
				}

				100% {
					bottom: 5%;
				}
			}

			.error-number {
				font-size: 50vw;
			}

			.text-content {
				width: 80%;
				padding: 20px;
				left: 50%;
				top: 50%;
				transform: translate(-50%, -50%);
			}
		}
	</style>
</head>

<body>

	<div class="container" id="mainContainer">
		<div class="error-number" id="errorCode">503</div>

		<img src="/image/bird.png" alt="Confused Pigeon" class="bird-image" id="theBird">

		<div class="text-content">
			<h2 id="errorTitle">Service Unavailable</h2>
			<p id="errorMsg">The pigeons are on a union strike. They demand better brioche. Come back later.</p>
			<a href="/" class="home-btn">Go Home</a>
		</div>
	</div>

	<script>
		// Static 503 page â€” fixed, no other error codes supported here

		// --- 3. LOGICA CIBO, SALTO E SFONDO DINAMICO ---

		const emojis = ['ðŸž', 'ðŸ¥', 'ðŸ¥–', 'ðŸ¥¨', 'ðŸ¥¯', 'ðŸ¥ž', 'ðŸ§‡', 'ðŸ°', 'ðŸ¥§', 'ðŸ©', 'ðŸª', 'ðŸ®'];

		const birdElement = document.getElementById('theBird');
		const containerElement = document.getElementById('mainContainer'); // Recuperiamo il container
		let birdRect, birdCenterX, birdCenterY;
		const jumpThreshold = 400;

		let mouseX = 0;
		let mouseY = 0;
		let feedInterval = null;
		let moveThrottle = null;

		function updateBirdPosition() {
			if (!birdElement) return;
			birdRect = birdElement.getBoundingClientRect();
			birdCenterX = birdRect.left + birdRect.width / 2;
			birdCenterY = birdRect.top + birdRect.height / 2;
		}

		window.onload = function () {
			updateBirdPosition();
			window.addEventListener('resize', updateBirdPosition);
		};

		let scaleInterval = null;
		let scaleValue = 1;
		const maxScale = 1.7;
		const scaleStep = 0.02;
		const scaleDelay = 16; // ~60fps

		let originalMsg = null;
		let originalTitle = null;
		let boxElement = document.querySelector('.text-content');
		let originalBoxBg = null;
		let originalMsgColor = null;
		function growBird() {
			if (scaleInterval) return;
			scaleInterval = setInterval(() => {
				if (scaleValue < maxScale) {
					scaleValue += scaleStep;
					if (scaleValue > maxScale) scaleValue = maxScale;
					birdElement.style.transform = `scale(${scaleValue})`;
				}
				if (scaleValue >= maxScale) {
					if (!originalMsg) {
						originalMsg = document.getElementById('errorMsg').innerText;
					}
					if (!originalTitle) {
						originalTitle = document.getElementById('errorTitle').innerText;
					}
					if (!originalBoxBg) {
						originalBoxBg = boxElement.style.background;
					}
					if (!originalMsgColor) {
						originalMsgColor = document.getElementById('errorMsg').style.color;
					}
					const code = document.getElementById('errorCode').innerText;
					document.getElementById('errorMsg').innerText = `facci passare webserv o ti mandiamo ${code} piccioni a casa`;
					document.getElementById('errorTitle').innerText = 'AO WAIT';
					boxElement.style.background = 'rgba(200,0,0,0.85)';
					document.getElementById('errorMsg').style.color = '#fff';
				}
			}, scaleDelay);
		}

		function shrinkBird() {
			if (scaleInterval) clearInterval(scaleInterval);
			if (originalMsg) {
				document.getElementById('errorMsg').innerText = originalMsg;
				originalMsg = null;
			}
			if (originalTitle) {
				document.getElementById('errorTitle').innerText = originalTitle;
				originalTitle = null;
			}
			if (originalBoxBg !== null) {
				boxElement.style.background = '';
				originalBoxBg = null;
			} else {
				boxElement.style.background = '';
			}
			if (originalMsgColor !== null) {
				document.getElementById('errorMsg').style.color = originalMsgColor;
				originalMsgColor = null;
			} else {
				document.getElementById('errorMsg').style.color = '';
			}
			scaleInterval = setInterval(() => {
				if (scaleValue > 1) {
					scaleValue -= scaleStep;
					if (scaleValue < 1) scaleValue = 1;
					birdElement.style.transform = `scale(${scaleValue})`;
				} else {
					clearInterval(scaleInterval);
					scaleInterval = null;
				}
			}, scaleDelay);
		}

		document.addEventListener('mousemove', function (e) {
			mouseX = e.pageX;
			mouseY = e.pageY;

			if (!moveThrottle) {
				moveThrottle = setTimeout(() => {
					createCrumb(mouseX, mouseY);
					moveThrottle = null;
				}, 40);
			}

			if (!birdElement) return;

			const distanceX = e.clientX - birdCenterX;
			const distanceY = e.clientY - birdCenterY;
			const distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);

			if (distance < jumpThreshold) {
				birdElement.classList.add('is-jumping');
				containerElement.classList.add('bread-mode');
				if (!feedInterval) {
					feedInterval = setInterval(() => {
						createCrumb(mouseX, mouseY);
					}, 100);
				}
				growBird();
			} else {
				birdElement.classList.remove('is-jumping');
				containerElement.classList.remove('bread-mode');
				if (feedInterval) {
					clearInterval(feedInterval);
					feedInterval = null;
				}
				shrinkBird();
			}
		});

		function createCrumb(x, y) {
			const el = document.createElement('span');
			el.className = 'crumb';
			el.innerText = emojis[Math.floor(Math.random() * emojis.length)];

			const dispersion = 40;
			const offsetX = (Math.random() - 0.5) * dispersion;
			const offsetY = (Math.random() - 0.5) * dispersion;

			el.style.left = (x + offsetX) + 'px';
			el.style.top = (y + offsetY) + 'px';
			el.style.fontSize = (20 + Math.random() * 15) + 'px';

			document.body.appendChild(el);

			setTimeout(() => { el.remove(); }, 1000);
		}
	</script>
</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Error - Service Unavailable</title>
	<style>
		body,
		html {
			margin: 0;
			padding: 0;
			height: 100%;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			overflow: hidden
		}

		.container {
			display: grid;
			place-items: center;
			height: 100vh;
			width: 100vw;
			position: relative;
			grid-template-areas: "content";
			background-color: #dedede
		}

		.error-number {
			grid-area: content;
			font-size: 85vh;
			font-weight: 900;
			color: #222;
			z-index: 1;
			user-select: none;
			line-height: 1;
			display: flex;
			align-items: center;
			justify-content: center
		}

		.text-content {
			grid-area: content;
			text-align: center;
			z-index: 10;
			background: rgba(255, 255, 255, .7);
			padding: 40px;
			border-radius: 20px;
			max-width: 500px;
			position: absolute;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%)
		}

		.home-btn {
			display: inline-block;
			padding: 12px 30px;
			background-color: #333;
			color: #fff;
			text-decoration: none;
			border-radius: 5px
		}

		@media (max-width:768px) {
			.error-number {
				font-size: 50vw
			}

			.text-content {
				width: 80%
			}
		}
	</style>
</head>

<body>
	<div class="container" id="mainContainer">
		<div class="error-number" id="errorCode">503</div>
		<div class="text-content">
			<h2 id="errorTitle">Service Unavailable</h2>
			<p id="errorMsg">The pigeons are on a union strike. They demand better brioche. Come back later.</p>
			<a href="/" class="home-btn">Go Home</a>
		</div>
	</div>
	<script>
		const messages = {

			'503': { title: "Service Unavailable", text: "The pigeons are on a union strike. They demand better brioche. Come back later." },
			'default': { title: "Unknown Error", text: "Something is wrong. The pigeon is looking at you with a very judgmental stare." }
		};

		const urlParams = new URLSearchParams(window.location.search);
		const code = urlParams.get('code') || '503';
		document.getElementById('errorCode').innerText = code;
		const messageData = messages[code] || messages['default'];
		document.getElementById('errorTitle').innerText = messageData.title;
		document.getElementById('errorMsg').innerText = messageData.text;
	</script>
</body>

</html>
