# Test configuration for webserv
# Enables all features for the test page

max_request_body 4096;
error_page 404 /404.html;

server {
  listen 8080;
  root ./www;
  autoindex on;
  index index.html;

  # Redirect test
  location /42 {
    redirect 302 https://42.fr;
  }

  # CGI scripts
  location /cgi-bin/ {
    cgi_root ./www/cgi-bin;
    allow_methods GET POST;
  }

  # Upload location (POST creates files, DELETE removes them)
  location /uploads/ {
    root ./uploads;
    allow_methods GET POST DELETE;
    autoindex on;
  }
}
